function dpYoutubeEmbedService(e,t,n,a){function o(){u.resolve(window.getYoutubeEmbed)}function r(){n.$apply(function(){d=!0})}function i(){return u.promise}function l(){return d}var d=!1,u=t.defer(),c=e[0].createElement("script");c.type="text/javascript",c.async=!0,c.src="https://www.youtube.com/iframe_api",c.onreadystatechange=function(){var e=new Date;e.getMilliseconds();"complete"==this.readyState&&o()},c.onload=o();var p=e[0].getElementsByTagName("body")[0],y=new Date;y.getMilliseconds();p.appendChild(c),"undefined"==typeof YT?a.onYouTubeIframeAPIReady=r:YT.loaded?d=!0:YT.ready(r);var s={getYoutubeEmbed:i,isAPIReady:l};return s}function dpYoutubeEmbedDirective(t,n,a,o,r){function i(a,o,r){function i(){a.player=new YT.Player("player",{playerVars:{autoplay:0,controls:1,showinfo:1},videoId:l(),events:{onReady:d,onStateChange:u,onPlaybackQualityChange:s,onPlaybackRateChange:m,onError:g}})}function l(){return n.getNextSongId()}function d(e){}function u(e){var t=e.data;switch(t){case YT.PlayerState.PLAYING:c();break;case YT.PlayerState.PAUSED:p();break;case YT.PlayerState.ENDED:y();break;case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}}function c(){a.isPlaying=!0,a.$apply()}function p(){a.isPlaying=!1,a.$apply()}function y(){a.executePlayerEndedActions(!1)}function s(e){}function m(e){}function g(t){console.log("Youtube Player Event - onErrorCB"),console.log("\tError Data: "+e.data)}var b=a.$watch(function(){return t.isAPIReady()},function(e){e&&(b(),i())})}var l={restrict:"E",templateUrl:"components/playerPanel/playerComponent/dpYoutubeEmbedTemplate.html",link:i,controller:dpYoutubeEmbedController};return l}function dpYoutubeEmbedController(e,t,n){function a(){e.player.videoId=t.getNextSongId(),e.player.loadVideoById(e.player.videoId),e.player.playVideo()}var o=.52,r=.5,i=768,l=850;e.logicService=t,e.isPlaying=!1,e.onPauseSongClick=function(){e.isPlaying=!1,e.player.pauseVideo()},e.onPlaySongClick=function(){e.isPlaying=!0,e.player.playVideo()},e.executePlayerEndedActions=function(e){t.popSongIndexFromListAndUpdate(e),a()},e.onNextSongClick=function(){e.player.stopVideo(),e.executePlayerEndedActions(!0)},e.getPlayerHeight=function(){return e.getPlayerWidth()*o},e.getPlayerWidth=function(){var e=window.innerWidth;if(e<=i)return e;var t=e*r;return e>t?t>l?l:t:e},e.getBarWidth=function(){var t=e.getPlayerWidth();return{width:t+"px"}},e.getPlayerState=function(){return angular.isDefined(e.player)?e.player.getPlayerState():0},e.getPlayingBarTempByDevice=function(){return n("max-width: 375px")?"components/playerPanel/playerComponent/playingBarTemplateSmall.html":"components/playerPanel/playerComponent/playingBarTemplateBig.html"}}angular.module("dpYoutubeEmbedComponent",[]).factory("dpYoutubeEmbedService",dpYoutubeEmbedService).directive("dpYoutubeEmbedDirective",dpYoutubeEmbedDirective),dpYoutubeEmbedService.$inject=["$document","$q","$rootScope","$window"],dpYoutubeEmbedDirective.$inject=["dpYoutubeEmbedService","dpSongsListLogic","$mdMedia","$window","$http"],dpYoutubeEmbedController.$inject=["$scope","dpSongsListLogic","$mdMedia"];