function dpYoutubeEmbedService(e,t,n,a){function r(){p.resolve(window.getYoutubeEmbed)}function o(){n.$apply(function(){u=!0})}function i(){return p.promise}function l(){return u}var u=!1,p=t.defer(),c=e[0].createElement("script");c.type="text/javascript",c.async=!0,c.src="https://www.youtube.com/iframe_api",c.onreadystatechange=function(){var e=new Date;e.getMilliseconds();"complete"==this.readyState&&r()},c.onload=r();var d=e[0].getElementsByTagName("body")[0];new Date;d.appendChild(c),"undefined"==typeof YT?a.onYouTubeIframeAPIReady=o:YT.loaded?u=!0:YT.ready(o);var y={getYoutubeEmbed:i,isAPIReady:l};return y}function dpYoutubeEmbedDirective(e,t,n,a,r){function o(a,r,o){function i(){a.player=new YT.Player("player",{playerVars:{autoplay:0,controls:1,showinfo:0,enablejsapi:1,iv_load_policy:3,rel:0,playsinline:1},videoId:l(),events:{onReady:u,onStateChange:p,onPlaybackQualityChange:s,onPlaybackRateChange:m,onError:b}})}function l(){return t.getNextSongId()}function u(e){}function p(e){var t=e.data;switch(t){case YT.PlayerState.PLAYING:c();break;case YT.PlayerState.PAUSED:d();break;case YT.PlayerState.ENDED:y();break;case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}}function c(){n.setPlay(),a.$apply()}function d(){n.setPause(),a.$apply()}function y(){t.popSongIndexFromListAndUpdate(!1);var e=t.getNextSongId();n.loadSongById(e)}function s(e){}function m(e){}function b(e){console.log("Youtube Player Event - onErrorCB"),console.log("Error Data: "+e.data),y()}var g=a.$watch(function(){return e.isAPIReady()},function(e){e&&(g(),i())})}var i={restrict:"E",templateUrl:"components/playerPanel/playerComponent/dpYoutubeEmbedTemplate.html",link:o,controller:dpYoutubeEmbedController};return i}function dpYoutubeEmbedController(e,t,n,a){var r=.52,o=.5,i=768,l=850;e.logicService=t,e.getPlayerHeight=function(){return e.getPlayerWidth()*r},e.getPlayerWidth=function(){var e=window.innerWidth;if(e<=i)return e;var t=e*o;return e>t?t>l?l:t:e},e.getBarWidth=function(){var t=e.getPlayerWidth();return{width:t+"px"}},e.getPlayerState=function(){return angular.isDefined(e.player)?e.player.getPlayerState():0},e.getPlayingBarTempByDevice=function(){return n.isDesktop()?"components/playerPanel/playerComponent/playingBarTemplateBig.html":"components/playerPanel/playerComponent/playingBarTemplateSmall.html"},e.getPlayerWarpperClass=function(){return n.isDesktop()?"player-wrapper-horizontal":"player-wrapper-vertical"},e.getSongFullNameWidth=function(){var e=document.getElementsByClassName("song-fullname-text"),t=e[0].innerText.length,n=9*t;return{width:n+"px"}}}angular.module("dpYoutubeEmbedComponent",[]).factory("dpYoutubeEmbedService",dpYoutubeEmbedService).directive("dpYoutubeEmbedDirective",dpYoutubeEmbedDirective),dpYoutubeEmbedService.$inject=["$document","$q","$rootScope","$window"],dpYoutubeEmbedDirective.$inject=["dpYoutubeEmbedService","dpSongsListLogic","dpPlayerService","$window","$http"],dpYoutubeEmbedController.$inject=["$scope","dpSongsListLogic","dpAppUtils","dpPlayerService"];