function dpYoutubeEmbedService(e,t,n,o){function a(){var e=new Date;e.getMilliseconds();c.resolve(window.getYoutubeEmbed)}function r(){n.$apply(function(){u=!0})}function i(){var e=new Date;e.getMilliseconds();return c.promise}function d(){return u}var u=!1,c=t.defer(),l=e[0].createElement("script");l.type="text/javascript",l.async=!0,l.src="https://www.youtube.com/iframe_api",l.onreadystatechange=function(){var e=new Date;e.getMilliseconds();"complete"==this.readyState&&a()},l.onload=a();var p=e[0].getElementsByTagName("body")[0],y=new Date;y.getMilliseconds();p.appendChild(l),"undefined"==typeof YT?o.onYouTubeIframeAPIReady=r:YT.loaded?u=!0:YT.ready(r);var s={getYoutubeEmbed:i,isAPIReady:d};return s}function dpYoutubeEmbedDirective(t,n,o,a,r){function i(o,a,r){function i(){var e=new Date;e.getMilliseconds();o.player=new YT.Player("player",{playerVars:{autoplay:0,controls:1,showinfo:1},videoId:d(),events:{onReady:u,onStateChange:c,onPlaybackQualityChange:s,onPlaybackRateChange:b,onError:g}})}function d(){return n.getNextSongId()}function u(e){}function c(e){var t=e.data;switch(t){case YT.PlayerState.PLAYING:l();break;case YT.PlayerState.PAUSED:p();break;case YT.PlayerState.ENDED:y();break;case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}}function l(){o.isPlaying=!0,o.$apply()}function p(){o.isPlaying=!1,o.$apply()}function y(){o.executePlayerEndedActions(!1)}function s(e){}function b(e){}function g(t){console.log("Youtube Player Event - onErrorCB"),console.log("\tError Data: "+e.data)}var f=o.$watch(function(){return t.isAPIReady()},function(e){e&&(f(),i())})}var d={restrict:"E",templateUrl:"components/playerPanel/playerComponent/dpYoutubeEmbedTemplate.html",link:i,controller:dpYoutubeEmbedController};return d}function dpYoutubeEmbedController(e,t,n){var o=.52,a=.5,r=768,i=850;e.logicService=t,e.isPlaying=!1,e.onPauseSongClick=function(){e.isPlaying=!1,e.player.pauseVideo()},e.onPlaySongClick=function(){e.isPlaying=!0,e.player.playVideo()},e.executePlayerEndedActions=function(n){t.popSongIndexFromListAndUpdate(n),e.player.videoId=t.getNextSongId(),e.player.loadVideoById(e.player.videoId),e.player.playVideo()},e.onNextSongClick=function(){e.player.stopVideo(),e.executePlayerEndedActions(!0)},e.getPlayerHeight=function(){return e.getPlayerWidth()*o},e.getPlayerWidth=function(){var e=window.innerWidth;if(e<=r)return e;var t=e*a;return e>t?t>i?i:t:e},e.getBarWidth=function(){var t=e.getPlayerWidth();return{width:t+"px"}},e.getPlayerState=function(){return angular.isDefined(e.player)?e.player.getPlayerState():0},e.isSmartPhoneLayout=function(){return n("max-width: 375px")}}angular.module("dpYoutubeEmbedComponent",[]).factory("dpYoutubeEmbedService",dpYoutubeEmbedService).directive("dpYoutubeEmbedDirective",dpYoutubeEmbedDirective),dpYoutubeEmbedService.$inject=["$document","$q","$rootScope","$window"],dpYoutubeEmbedDirective.$inject=["dpYoutubeEmbedService","dpSongsListLogic","$mdMedia","$window","$http"],dpYoutubeEmbedController.$inject=["$scope","dpSongsListLogic","$mdMedia"];