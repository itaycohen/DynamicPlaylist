function dpYoutubeEmbedService(e,t,n,a){function o(){d.resolve(window.getYoutubeEmbed)}function r(){n.$apply(function(){u=!0})}function i(){return dpSongsListLogic.printTime("getYoutubeEmbed"),d.promise}function l(){return u}var u=!1,d=t.defer(),c=e[0].createElement("script");c.type="text/javascript",c.async=!0,c.src="https://www.youtube.com/iframe_api",c.onreadystatechange=function(){var e=new Date,t=e.getMilliseconds();console.log("onreadystatechange was loaded, time: "+e),console.log("onreadystatechange was loaded, mili: "+t),"complete"==this.readyState&&o()},c.onload=o();var p=e[0].getElementsByTagName("body")[0],s=new Date;console.log("component: appendChild, time: "+s.getSeconds()+":"+s.getMilliseconds()),p.appendChild(c),"undefined"==typeof YT?a.onYouTubeIframeAPIReady=r:YT.loaded?u=!0:YT.ready(r);var y={getYoutubeEmbed:i,isAPIReady:l};return y}function dpYoutubeEmbedDirective(t,n,a,o,r){function i(o,r,i){function l(){n.printTime("loadYoutubeEmbed"),o.player=new YT.Player("player",{playerVars:{autoplay:0,controls:1,showinfo:0,enablejsapi:1,iv_load_policy:3,rel:0,playsinline:1},videoId:u(),events:{onReady:d,onStateChange:c,onPlaybackQualityChange:m,onPlaybackRateChange:g,onError:b}})}function u(){return n.getNextSongId()}function d(e){}function c(e){var t=e.data;switch(t){case YT.PlayerState.PLAYING:p();break;case YT.PlayerState.PAUSED:s();break;case YT.PlayerState.ENDED:y();break;case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}}function p(){a.setPlay(),o.$apply()}function s(){a.setPause(),o.$apply()}function y(){n.popSongIndexFromListAndUpdate(!1),loadNextSong()}function m(e){}function g(e){}function b(t){console.log("Youtube Player Event - onErrorCB"),console.log("\tError Data: "+e.data)}var f=o.$watch(function(){return t.isAPIReady()},function(e){e&&(f(),l())})}var l={restrict:"E",templateUrl:"components/playerPanel/playerComponent/dpYoutubeEmbedTemplate.html",link:i,controller:dpYoutubeEmbedController};return l}function dpYoutubeEmbedController(e,t,n,a){var o=.52,r=.5,i=768,l=850;e.logicService=t,e.getPlayerHeight=function(){return e.getPlayerWidth()*o},e.getPlayerWidth=function(){var e=window.innerWidth;if(e<=i)return e;var t=e*r;return e>t?t>l?l:t:e},e.getBarWidth=function(){var t=e.getPlayerWidth();return{width:t+"px"}},e.getPlayerState=function(){return angular.isDefined(e.player)?e.player.getPlayerState():0},e.getPlayingBarTempByDevice=function(){return n.isDesktop()?"components/playerPanel/playerComponent/playingBarTemplateBig.html":"components/playerPanel/playerComponent/playingBarTemplateSmall.html"},e.getPlayerWarpperClass=function(){return n.isDesktop()?"player-wrapper-horizontal":"player-wrapper-vertical"},e.getSongFullNameWidth=function(){var e=document.getElementsByClassName("song-fullname-text"),t=e[0].innerText.length,n=9*t;return{width:n+"px"}}}angular.module("dpYoutubeEmbedComponent",[]).factory("dpYoutubeEmbedService",dpYoutubeEmbedService).directive("dpYoutubeEmbedDirective",dpYoutubeEmbedDirective),dpYoutubeEmbedService.$inject=["$document","$q","$rootScope","$window"],dpYoutubeEmbedDirective.$inject=["dpYoutubeEmbedService","dpSongsListLogic","dpPlayerService","$window","$http"],dpYoutubeEmbedController.$inject=["$scope","dpSongsListLogic","dpAppUtils","dpPlayerService"];