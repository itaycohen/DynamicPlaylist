function dpYoutubeEmbedService(e,t,n,a){function o(){c.resolve(window.getYoutubeEmbed)}function r(){n.$apply(function(){u=!0})}function i(){return c.promise}function l(){return u}var u=!1,c=t.defer(),d=e[0].createElement("script");d.type="text/javascript",d.async=!0,d.src="https://www.youtube.com/iframe_api",d.onreadystatechange=function(){var e=new Date;e.getMilliseconds();"complete"==this.readyState&&o()},d.onload=o();var p=e[0].getElementsByTagName("body")[0],y=new Date;y.getMilliseconds();p.appendChild(d),"undefined"==typeof YT?a.onYouTubeIframeAPIReady=r:YT.loaded?u=!0:YT.ready(r);var s={getYoutubeEmbed:i,isAPIReady:l};return s}function dpYoutubeEmbedDirective(t,n,a,o){function r(a,o,r){function i(){a.player=new YT.Player("player",{playerVars:{autoplay:0,controls:1,showinfo:0,enablejsapi:1,iv_load_policy:3,rel:0},videoId:l(),events:{onReady:u,onStateChange:c,onPlaybackQualityChange:s,onPlaybackRateChange:g,onError:m}})}function l(){return n.getNextSongId()}function u(e){}function c(e){var t=e.data;switch(t){case YT.PlayerState.PLAYING:d();break;case YT.PlayerState.PAUSED:p();break;case YT.PlayerState.ENDED:y();break;case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}}function d(){a.isPlaying=!0,a.$apply()}function p(){a.isPlaying=!1,a.$apply()}function y(){a.executePlayerEndedActions(!1)}function s(e){}function g(e){}function m(t){console.log("Youtube Player Event - onErrorCB"),console.log("\tError Data: "+e.data)}var b=a.$watch(function(){return t.isAPIReady()},function(e){e&&(b(),i())})}var i={restrict:"E",templateUrl:"components/playerPanel/playerComponent/dpYoutubeEmbedTemplate.html",link:r,controller:dpYoutubeEmbedController};return i}function dpYoutubeEmbedController(e,t,n){function a(){e.player.videoId=t.getNextSongId(),e.player.loadVideoById(e.player.videoId),e.player.playVideo()}var o=.52,r=.5,i=768,l=850;e.logicService=t,e.isPlaying=!1,e.onPauseSongClick=function(){e.isPlaying=!1,e.player.pauseVideo()},e.onPlaySongClick=function(){e.isPlaying=!0,e.player.playVideo()},e.executePlayerEndedActions=function(e){t.popSongIndexFromListAndUpdate(e),a()},e.onNextSongClick=function(){e.player.stopVideo(),e.executePlayerEndedActions(!0)},e.getPlayerHeight=function(){return e.getPlayerWidth()*o},e.getPlayerWidth=function(){var e=window.innerWidth;if(e<=i)return e;var t=e*r;return e>t?t>l?l:t:e},e.getBarWidth=function(){var t=e.getPlayerWidth();return{width:t+"px"}},e.getPlayerState=function(){return angular.isDefined(e.player)?e.player.getPlayerState():0},e.getPlayingBarTempByDevice=function(){return n.isMobile()?"components/playerPanel/playerComponent/playingBarTemplateSmall.html":"components/playerPanel/playerComponent/playingBarTemplateBig.html"},e.getPlayerWarpperClass=function(){return n.isDesktop()?"player-wrapper-horizontal":"player-wrapper-vertical"},e.getSongFullNameWidth=function(){var e=document.getElementsByClassName("song-fullname-text"),t=e[0].innerText.length,n=9*t;return{width:n+"px"}}}angular.module("dpYoutubeEmbedComponent",[]).factory("dpYoutubeEmbedService",dpYoutubeEmbedService).directive("dpYoutubeEmbedDirective",dpYoutubeEmbedDirective),dpYoutubeEmbedService.$inject=["$document","$q","$rootScope","$window"],dpYoutubeEmbedDirective.$inject=["dpYoutubeEmbedService","dpSongsListLogic","$window","$http"],dpYoutubeEmbedController.$inject=["$scope","dpSongsListLogic","dpAppUtils"];