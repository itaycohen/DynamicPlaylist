function dpPlayingBar(){var e={restrict:"E",template:"<ng-include src='getBarTemplateUrl()'/>",controller:dpPlayingBarController};return e}function dpPlayingBarController(e,n,r,a,t,l,o,i){function u(e){var n=e.split(":"),r=60*+n[0]+ +n[1];return r}function c(){e.data.currentVolumeLevel=0}function g(){e.data.currentVolumeLevel=a.getVolumeLevel()}n.printTime("dpPlayingBarController"),e.logicService=n,e.playerService=a,e.currentPlayerDurationText="0:00",e.data={},e.data.progressBarDuration=0,e.data.currentVolumeLevel=100,e.currentVolumeLevel=a.getVolumeLevel(),e.$watch(function(){return a.getVolumeLevel()},function(){e.data.currentVolumeLevel=a.getVolumeLevel()}),e.$watch(function(){return a.isPlayerMuted()},function(){a.isPlayerMuted()?c():0===e.data.currentVolumeLevel&&g()}),i(function(){a.isPlayerEnabled()&&(e.currentPlayerDurationText=a.getPlayerCurrentDurationFormatted())},100);var d=!1;i(function(){a.isPlayerEnabled()&&!d&&(e.data.progressBarDuration=a.getPlayerCurrentDuration())},1e3),e.getRawDuration=u(n.getSongDurationByIndex(n.getCurrentPlayingSongIndex())),e.onProgressBarChange=function(){a.isPlayerEnabled()&&(d=!0,a.onPauseSongClick(),a.playerSeekTo(e.data.progressBarDuration),a.onPlaySongClick())},e.onProgressBarChangeDown=function(){a.isPlayerEnabled()&&(a.onPauseSongClick(),a.playerSeekTo(e.data.progressBarDuration))},e.onProgressBarChangeUp=function(){a.isPlayerEnabled()&&(a.onPlaySongClick(),d=!1)},e.onVolumeBarChange=function(){0===e.data.currentVolumeLevel?a.mutePlayer():e.isMuted()&&a.unMutePlayer(),a.setVolumeLevel(e.data.currentVolumeLevel)},e.getBarTemplateUrl=function(){return r.isDesktop()?"components/playingBar/dpPlayingBarFixWideScreen.html":"components/playingBar/dpPlayingBarLongVerticalScreen.html"},e.onPlayPauseClick=function(){a.isPlaying()?a.onPauseSongClick():a.onPlaySongClick()},e.getPlayPauseStyle=function(){return a.isPlaying()?"":"paused"},e.isMuted=function(){return a.isPlayerMuted()},e.onSpeakerIconClick=function(){e.isMuted()?(a.unMutePlayer(),g()):(a.mutePlayer(),c())}}angular.module("dpPlayingBar",[]).directive("dpPlayingBar",dpPlayingBar),dpPlayingBar.$inject=["dpSongsListLogic"],dpPlayingBarController.$inject=["$scope","dpSongsListLogic","dpAppUtils","dpPlayerService","dpYoutubeEmbedService","$window","$timeout","$interval"];