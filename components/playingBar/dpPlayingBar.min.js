function dpPlayingBar(){var e={restrict:"E",template:"<ng-include src='getBarTemplateUrl()'/>",controller:dpPlayingBarController};return e}function dpPlayingBarController(e,n,t,r,a,o,i,l){function u(e){document.getElementById(e).classList.remove("md-active")}function c(e){var n=e.split(":"),t=60*+n[0]+ +n[1];return t}function d(){e.data.currentVolumeLevel=0}function s(){e.data.currentVolumeLevel=r.getVolumeLevel()}e.logicService=n,e.playerService=r,e.currentPlayerDurationText="0:00",e.data={},e.data.progressBarDuration=0,e.data.currentVolumeLevel=100,e.currentVolumeLevel=r.getVolumeLevel(),e.$watch(function(){return r.getVolumeLevel()},function(){e.data.currentVolumeLevel=r.getVolumeLevel()}),e.$watch(function(){return r.isPlayerMuted()},function(){r.isPlayerMuted()?d():0===e.data.currentVolumeLevel&&s()}),l(function(){r.isPlayerEnabled()&&(e.currentPlayerDurationText=r.getPlayerCurrentDurationFormatted())},100);var g=!1;l(function(){r.isPlayerEnabled()&&!g&&(e.data.progressBarDuration=r.getPlayerCurrentDuration())},1e3),e.getRawDurationByIndex=function(e){return c(n.getSongDurationByIndex(e))},e.onProgressBarChangeDown=function(){u("progress-bar"),r.isPlayerEnabled()&&(r.onPauseSongClick(),r.playerSeekTo(e.data.progressBarDuration))},e.onProgressBarChangeUp=function(){r.isPlayerEnabled()&&(r.onPlaySongClick(),g=!1)},e.onVolumeBarChange=function(){u("volume-slider"),0===e.data.currentVolumeLevel?r.mutePlayer():e.isMuted()&&r.unMutePlayer(),r.setVolumeLevel(e.data.currentVolumeLevel)},e.getBarTemplateUrl=function(){return t.isDesktop()?"components/playingBar/dpPlayingBarFixWideScreen.html":"components/playingBar/dpPlayingBarLongVerticalScreen.html"},e.onPlayPauseClick=function(){r.isPlaying()?r.onPauseSongClick():r.onPlaySongClick()},e.getPlayPauseStyle=function(){return r.isPlaying()?"":"paused"},e.isMuted=function(){return r.isPlayerMuted()},e.onSpeakerIconClick=function(){e.isMuted()?(r.unMutePlayer(),s()):(r.mutePlayer(),d())},e.getNameMaxWidth=function(){var e=window.innerWidth-172;return e+="px",{"max-width":e}},e.onFacebookShareIconClick=function(){var e=window.location.href;FB.ui({method:"share",display:"popup",href:e,caption:"An example caption"},function(e){})},e.onTwitterShareIconClick=function(){var e=window.location.href,n="I'm listening to Mixshake! "+e+"&hashtags=mixshake",t="http://twitter.com/intent/tweet?text="+n;return window.open(t,"twitterwindow","left=200,top=200,width=600,height=300,toolbar=0,resizable=1"),!1}}angular.module("dpPlayingBar",[]).directive("dpPlayingBar",dpPlayingBar),dpPlayingBar.$inject=["dpSongsListLogic"],dpPlayingBarController.$inject=["$scope","dpSongsListLogic","dpAppUtils","dpPlayerService","dpYoutubeEmbedService","$window","$timeout","$interval"];